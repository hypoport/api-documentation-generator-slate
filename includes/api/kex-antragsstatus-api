<h1 id='kex-antragsstatus-api'>KEX-Antragsstatus-API</h1>
<p>Die Statuswechsel API für <strong>Kredit</strong>Smart-Anträge ist unter folgender URL erreichbar:</p>
<pre class="highlight plaintext"><code>https://www.europace2.de/kreditsmart/kex/antraege/status
</code></pre><h2 id='statuswechsel'>Statuswechsel</h2>
<p>Diese Schnittstelle ermöglicht es, den Status eines Antrags zu verändern oder den aktuellen Status um Zusatzinformationen zu ergänzen. Der Service erwartet einen <code>POST</code>-Request mit einem JSON-Dokument als Request-Body.</p>

<p>Folgende Properties stehen für den Request-Body zur Verfügung:</p>

<table><thead>
<tr>
<th>Request Parameter</th>
<th>Beschreibung</th>
<th>Anmerkungen</th>
</tr>
</thead><tbody>
<tr>
<td>antragsnummer</td>
<td>Kennung des Antrags auf der Europace2-Plattform</td>
<td>Pflichtangabe sofern keine  <strong>produktanbieterantragsnummer</strong> übermittelt wird.</td>
</tr>
<tr>
<td>produktanbieterantragsnummer</td>
<td>Kennung des Antrags beim zuständigen Produktanbieter</td>
<td>Pflichtangabe sofern keine <strong>antragsnummer</strong> übermittelt wird.</td>
</tr>
<tr>
<td>produktanbieterstatus</td>
<td>Status des Antrags beim Produktanbieter</td>
<td>Optional. Erlaubte Werte sind: <ul><li><code>NICHT_BEARBEITET</code></li><li><code>UNTERSCHRIEBEN</code></li><li><code>ABGELEHNT</code></li><li><code>ZURUECKGESTELLT</code></li></ul></td>
</tr>
<tr>
<td>antragstellerstatus</td>
<td>Status des Antrags beim Antragsteller</td>
<td>Optional. Erlaubte Werte sind: <ul><li><code>BEANTRAGT</code></li><li><code>UNTERSCHRIEBEN</code></li><li><code>NICHT_ANGENOMMEN</code></li><li><code>WIDERRUFEN</code></li></ul></td>
</tr>
<tr>
<td>kommentar</td>
<td>Kommentar zur Anzeige in der Benutzeroberfläche</td>
<td>Optional</td>
</tr>
<tr>
<td>hinweise</td>
<td>Liste von Hinweistexten zur Anzeige in der Benutzeroberfläche</td>
<td>Optional</td>
</tr>
</tbody></table>

<p>Die Authentifizierung erfolgt über einen per HTTP-Header übermittelten JWT-Voucher. Dieser muss berechtigt sein, den betroffenen Antrag zu modifizieren. Einen solchen JWT-Voucher bekommen Schnittstellenpartner von uns ausgestellt.</p>

<p>Folgende HTTP-Header werden erwartet:</p>

<table><thead>
<tr>
<th>Header Parameter</th>
<th>Beschreibung</th>
<th>Anmerkungen</th>
</tr>
</thead><tbody>
<tr>
<td>X-Authentication</td>
<td>JWT-Voucher mit Zugriffsrechten auf den betroffenen Antrag</td>
<td></td>
</tr>
<tr>
<td>Content-Type</td>
<td>Content Type des Request Bodies</td>
<td>Muss derzeit immer <code>application/json</code> sein</td>
</tr>
</tbody></table>

<p>Im Erfolgsfall gibt die Schnittstelle HTTP-Status <code>200</code> zurück.</p>
<h3 id='beispiele'>Beispiele</h3>
<p>Die hier gezeigten Beispiele können zum Testen per <code>curl</code> auf folgende Art nachvollzogen werden:</p>
<pre class="highlight sh tab-shell"><code>curl -v -XPOST https://www.europace2.de/kreditsmart/kex/antraege/status <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s2">"X-Authentication: </span><span class="k">${</span><span class="nv">JWT_VOUCHER</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    -d <span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_BODY</span><span class="k">}</span><span class="s2">"</span>
</code></pre><h4 id='produktanbieterstatuswechsel-mit-produktanbieterantragsnummer'>Produktanbieterstatuswechsel mit Produktanbieterantragsnummer</h4>
<p>Der Produktanbieterstatus für einen Antrag mit der Produktanbieterantragsnummer <code>12919351</code> kann mit folgendem Request-Body auf <code>UNTERSCHRIEBEN</code> gesetzt werden:</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"produktanbieterantragsnummer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12919351"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"produktanbieterstatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNTERSCHRIEBEN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='produktanbieterstatuswechsel-mit-antragsnummer'>Produktanbieterstatuswechsel mit Antragsnummer</h4>
<p>Alternativ kann statt der Produktanbieterantragsnummer auch die Antragsnummer übergeben werden:</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"antragsnummer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"985132/1/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"produktanbieterstatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNTERSCHRIEBEN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='statuswechsel-mit-kommentar'>Statuswechsel mit Kommentar</h4>
<p>Der Statuswechsel kann darüber hinaus mit einem Kommentar versehen werden, der den Anwendern von <strong>Kredit</strong>Smart zusätzlich zum eigentlichen Statuswechsel angezeigt wird:</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"produktanbieterantragsnummer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12919351"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"produktanbieterstatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZURUECKGESTELLT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kommentar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitte noch eine Kopie des Personalausweises nachreichen."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Sollte der Produktanbieterstatus schon dem aktuellen Status entsprechen, wird der Kommentar dennoch dem Antrag hinzugefügt.</p>
<h4 id='statuswechsel-mit-kommentar-und-hinweistexten'>Statuswechsel mit Kommentar und Hinweistexten</h4>
<p>Es ist außerdem möglich, eine Liste von Hinweistexten hinzuzufügen, welche dann in <strong>Kredit</strong>Smart entsprechend dargestellt wird.</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"produktanbieterantragsnummer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12919351"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"produktanbieterstatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZURUECKGESTELLT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kommentar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitte reichen Sie noch folgende Dokumente nach:"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hinweise"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Personalausweis"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Geburtsurkunde"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='antragstellerstatuswechsel'>Antragstellerstatuswechsel</h4>
<p>Der Antragstellerstatuswechsel verhält sich analog zum Produktanbieterstatus:</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"produktanbieterantragsnummer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12919351"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"antragstellerstatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNTERSCHRIEBEN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='gleichzeitiger-wechsel-von-produktanbieter-und-antragstellerstatus'>Gleichzeitiger Wechsel von Produktanbieter- und Antragstellerstatus</h4>
<p>Bei Bedarf können auch beide Status gleichzeitig geändert werden:</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"produktanbieterantragsnummer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12919351"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"produktanbieterstatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNTERSCHRIEBEN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"antragstellerstatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNTERSCHRIEBEN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>